# Entradas y Salidas Digitales (I/O)

## Niveles lógicos 

Tenemos que dar las indicaciones para mandar a nivel alto las salidas del microcontrolador; es decir, mandar a un `nivel lógico 1` o `alto` o `True`, esto lo que hará será que a la salida del pin tenga un nivel de voltaje de `3.3V`, en caso de mandarlo a `0` o `bajo` o `False`, es equivalente a `0V`.

Programación|Nivel lógico|Digital|Voltaje
:-:|:-:|:-:|:-:
False|0|LOW|0V
True|1|HIGH|3.3V

## Salidas digitales

Para comenzar vamos a controlar las salidas digitales. Para esto se usa la función `digitalWrite`.

```C
// uso de la función digitalWrite
digitalWrite(NO_PIN, MODO);
```

Configuración del `MODO`:

- `OUTPUT`: Indica que el pin será `salida`
- `INPUT`: Indica que el pin será `entrada`

```C
// Aquí indicamos que el pin 32 será salida
digitalWrite(34, OUTPUT);
```

Para conocer los pines que se pueden usar o el numero que podemos pasar para el pin ver la [tabla de los pines](../index.md#Pinout)

## Entradas digitales

Para comenzar vamos a controlar las entradas digitales. Para esto se usa la función `digitalWrite`.

```C
// uso de la función digitalWrite
digitalWrite(NO_PIN, MODO)
```

Configuración del `MODO`:

- `OUTPUT`: Indica que el pin será `salida`
- `INPUT`: Indica que el pin será `entrada`

```C
// Aquí indicamos que el pin 32 será entrada
digitalWrite(32, INPUT);
```

Para conocer los pines que se pueden usar o el numero que podemos pasar para el pin ver la [tabla de los pines](../index.md#Pinout)

## Utilizando las salidas digitales

### Encender un LED

Vamos a realizar un ejemplo básico para encender un LED.

**Material**

|Cantidad|Descripción|
|---|---|
|1| Placa ESP32|
|1|  LED|
|1|  R330|

**Diagrama pictórico**

![basic](../assets/schematic/io_basic.png)

**Código**

```C
int LED = 32; // declaro una variable con el número del pin en donde tengo el led
// the setup function runs once when you press reset or power the board
void setup() {
  pinMode(LED, OUTPUT);   // configuro el pin 32 como salida
  digitalWrite(LED, LOW); // indico que el pin 32 se ponga en estado BAJO, es decir, manda un 0 a la salida
}

// the loop function runs over and over again forever
void loop() {
  digitalWrite(LED, HIGH);   // indico que el pin 32 se ponga en estado ALTO, es decir, manda un 1 a la salida, prendiendo el LED
}
```
### Encender varios LED

Vamos a realizar un ejemplo básico para encender un LED.

**Material**

|Cantidad|Descripción|
|---|---|
|1| Placa ESP32|
|3|  LED|
|3|  R330|

**Diagrama pictórico**

![basic](../assets/schematic/leds_3.png)

**Código**

```C
int LED1 = 32; // declaro una variable con el número del pin en donde tengo el led
int LED2 = 33; // declaro una variable con el número del pin en donde tengo el led
int LED3 = 25; // declaro una variable con el número del pin en donde tengo el led
// the setup function runs once when you press reset or power the board
void setup() {
  pinMode(LED1, OUTPUT);   // configuro el pin 32 como salida
  pinMode(LED2, OUTPUT);   // configuro el pin 33 como salida
  pinMode(LED3, OUTPUT);   // configuro el pin 25 como salida
  digitalWrite(LED1, LOW); // indico que el pin 32 se ponga en estado BAJO, es decir, manda un 0 a la salida
  digitalWrite(LED2, LOW); // indico que el pin 33 se ponga en estado BAJO, es decir, manda un 0 a la salida
  digitalWrite(LED3, LOW); // indico que el pin 25 se ponga en estado BAJO, es decir, manda un 0 a la salida
}

// the loop function runs over and over again forever
void loop() {
  digitalWrite(LED1, HIGH);   // indico que el pin 32 se ponga en estado ALTO, es decir, manda un 1 a la salida, prendiendo el LED
  digitalWrite(LED2, HIGH);   // indico que el pin 33 se ponga en estado ALTO, es decir, manda un 1 a la salida, prendiendo el LED
  digitalWrite(LED3, HIGH);   // indico que el pin 25 se ponga en estado ALTO, es decir, manda un 1 a la salida, prendiendo el LED
}
```

### Blink LED

Vamos a realizar un ejemplo de parpadeo de un LED, conocido como blink-blink. Con un intervalo de tiempo de 1s.

**Material**

|Cantidad|Descripción|
|---|---|
|1| Placa ESP32|
|1|  LED|
|1|  R330|

**Diagrama pictórico**

![basic](../assets/schematic/io_basic.png)

**Código**

```C

int LED = 32; // declaro una variable con el número del pin en donde tengo el led

// the setup function runs once when you press reset or power the board

void setup() {
  pinMode(LED, OUTPUT);   // configuro el pin 32 como salida
  digitalWrite(LED, LOW); // indico que el pin 32 se ponga en estado BAJO, es decir, manda un 0 a la salida
}

// the loop function runs over and over again forever
void loop() {
  digitalWrite(LED, HIGH);   // enciendo el LED 
  delay(1000);               // espero un segundo
  digitalWrite(LED, LOW);    // apago el LED
  delay(1000);              // espero un segundo
}
```

## Entradas digitales

!!! Nota
    Se estará usando por default los pines `34` y `35` para los botones dado que estos pines solo pueden ser usados como `INPUT`, y vamos a aprovechar esto para sean nuestras entradas, si tu deseas usar cualquier otro pin solo ajusta tu código.


### Control de entrada, encender LED

Vamos a usar un botón para que mientras se este presionando el botón, se encienda el LED; es decir, mientras mantenga presionado el botón el LED estará encendido

**Material**

|Cantidad|Descripción|
|---|---|
|1| Placa ESP32|
|1|  LED|
|1|  R330|
|1|  push button|
|1|  R1K|

**Diagrama pictórico**

![basic](../assets/schematic/input_01.png)

**Código**

```C

int LED = 32; // declaro una variable con el número del pin en donde tengo el led
int BTN 34; // declaro una variable para identificar el pin en donde estará el botón

// the setup function runs once when you press reset or power the board
void setup() {
  pinMode(LED, OUTPUT);   // configuro el pin 32 como salida
  pinMode(BTN, INPUT); // configuro el pin 34 como entrada
  digitalWrite(LED, LOW); // indico que el pin 32 se ponga en estado BAJO, es decir, manda un 0 a la salida
}

// the loop function runs over and over again forever
void loop() {
  
  int status = digitalRead(BTN); //leo el estado del botón y lo guardo en la variable status
  if( status == 1){ //si el botón esta siendo presionado mando entro 
    digitalWrite(LED, HIGH);   // enciendo el LED 
    delay(250); // espero este tiempo para evitar el transitorio del botón
  }else{
    digitalWrite(LED, LOW);   // apago el LED 
  }
}
```


### LED ON/OFF

En este caso, si presiono el LED, este se enciende y se manteniente de esa manera, en caso que se vuelva a presionar, se apagará hasta que sea presionado de nuevo el LED.

**Material**

|Cantidad|Descripción|
|---|---|
|1| Placa ESP32|
|1|  LED|
|1|  R330|
|1|  push button|
|1|  R1K|

**Diagrama pictórico**

![basic](../assets/schematic/input_01.png)

**Código**

```C

int LED = 32; // declaro una variable con el número del pin en donde tengo el led
int BTN 34; // declaro una variable para identificar el pin en donde estará el botón

// the setup function runs once when you press reset or power the board
void setup() {
  pinMode(LED, OUTPUT);   // configuro el pin 32 como salida
  pinMode(BTN, INPUT); // configuro el pin 34 como entrada
  digitalWrite(LED, LOW); // indico que el pin 32 se ponga en estado BAJO, es decir, manda un 0 a la salida
}

// the loop function runs over and over again forever
void loop() {
  
  int status = digitalRead(BTN); //leo el estado del botón y lo guardo en la variable status
  if( status == 1){ //si el botón esta siendo presionado mando entro 
    digitalWrite(LED, HIGH);   // enciendo el LED 
    delay(250); // espero este tiempo para evitar el transitorio del botón
  }else{
    digitalWrite(LED, LOW);   // apago el LED 
  }
}
```

### Control de buzzer

Vamos a realizar un control de un buzzer activo (es decir, que con alimentación emita un sonido), cuando no se presione el botón, simplemente parpadea un led a 250mS, cuando sea presionado el botón el buzzer sonara y al mismo tiempo el LED va a encender a la misma velocidad

**Material**

|Cantidad|Descripción|
|---|---|
|1| Placa ESP32|
|1|  LED|
|1|  R330|
|1|  push button|
|1|  R1K|
|1|  Buzzer activo|


**Diagrama pictórico**

![basic](../assets/schematic/buzzer.png)

**Código**

```C
const int LED = 33; // declaro una variable con el número del pin en donde tengo el led
const int BUZZER = 25; // declaro la variable con el numero del pin en donde tendré el buzzer
const int BTN =34; // declaro una variable para identificar el pin en donde estará el botón

// the setup function runs once when you press reset or power the board
void setup() {
  pinMode(LED, OUTPUT);   // configuro el pin 33 como salida
  pinMode(BUZZER, OUTPUT);   // configuro el pin 25 como salida
  pinMode(BTN, INPUT); // configuro el pin 34 como entrada
  digitalWrite(LED, LOW); // indico que el pin 33 se ponga en estado BAJO, es decir, manda un 0 a la salida
}

// the loop function runs over and over again forever
void loop() {

  int status = digitalRead(BTN); //leo el estado del botón y lo guardo en la variable status

  if ( status == 1) { //si el botón esta siendo presionado mando entro
    digitalWrite(LED, HIGH);   // enciendo el LED
    digitalWrite(BUZZER, HIGH);   // enciendo el BUZZER
    delay(100); // espero este tiempo escuchar el sonido correcto
    digitalWrite(LED, LOW);   // enciendo el LED
    digitalWrite(BUZZER, LOW);   // enciendo el BUZZER
    delay(100); // espero este tiempo escuchar el sonido correcto
  } else {
    digitalWrite(LED, HIGH);   // enciendo el LED
    delay(250); //parpadea el LED
    digitalWrite(LED, LOW);   // enciendo el LED
    delay(250); //parpadea el LED
  }
}
```

### Display de 7 segmentos

!!! Note Nota
    Se estará usando un display de 7 segmentos de Cátodo común en todos los ejemplos, en caso de contar con uno de ánodo común, hacer los ajuste necesarios en el código

Contador básico

![](./../assets/videos/secuencia_0-F.webp)



---

### Seguidor de Luz

Es un carrito seguidor de Luz, cuando se recibe la luz en el sensor izquierdo, se activa el motor derecho, cuando recibe luz el sensor derecho se activa el motor izquierdo, si se recibe la luz en ambos se activan los 2 motores al mismo tiempo.

![esquemático](../assets/carrito_seguidor_luz.png)

> [Abrir la imagen](../assets/carrito_seguidor_luz.png)


`Nota: Solo se cambia la sección de control por la placa ESP32`

**Código**

```C
//Se uso el ESP32 version Wemos
const byte sensorD = 19; //
const byte sensorI = 23;
const byte motorD_1 = 26; // 26
const byte motorD_2 = 25; // 25
const byte motorI_1 = 17; // 17
const byte motorI_2 = 16; //1 6

void setup() {
  // put your setup code here, to run once:
  Serial.begin(115200);
  Serial.println("inicio");
  pinMode(sensorD, INPUT);
  pinMode(sensorI, INPUT);
  pinMode(motorD_1, OUTPUT);
  pinMode(motorD_2, OUTPUT);
  pinMode(motorI_1, OUTPUT);
  pinMode(motorI_2, OUTPUT);
  digitalWrite(motorD_2, LOW);
  digitalWrite(motorI_2, LOW);

}

void loop() {

  if (digitalRead(sensorD) == 1 && digitalRead(sensorI) == 1) {
    Serial.println("derecho e izquierdo");
    digitalWrite(motorD_1, HIGH);
    digitalWrite(motorI_1, HIGH);
    delay(10);
  } else if (digitalRead(sensorI) == 1) {
    Serial.println("izquierdo");
    digitalWrite(motorD_1, HIGH);
    digitalWrite(motorI_1, LOW);
    delay(10);
  } else if (digitalRead(sensorD) == 1) {
    Serial.println("derecho");
    digitalWrite(motorD_1, LOW);
    digitalWrite(motorI_1, HIGH);
    delay(10);
  } else {
    Serial.println("nada");
    digitalWrite(motorD_1, LOW);
    digitalWrite(motorI_1, LOW);
    delay(10);
  }

}
```